@page "/reviews/{ReviewId:int}"

@if (_summary == null)
{
    <div class="text-center">
        <div class="spinner-border" role="status">
            <span class="sr-only">Loading...</span>
        </div>
    </div>
}
else
{
    <div class="gh-issue-list">
        @foreach (var item in _summary.Items)
        {
            var videoUrl = _summary.GetVideoUrl(item.TimeCode);
            <div class="gh-issue-cell">
                @{
                    var itemDetailsUrl = $"/reviews/{_summary.Id}/item/{item.Id}";
                }
                <a class="gh-issue-title" href="@itemDetailsUrl">@item.Issue.Title</a>
                <span>
                    @foreach (var label in item.Issue.Labels)
                    {
                        <span class="gh-label"
                              style="background: @("#" + label.BackgroundColor); color: @label.ForegroundColor">@label.Name</span>
                        }
                </span>
                <div class="gh-details-cell">
                    <strong><a href="@item.FeedbackUrl">@item.Decision</a></strong>
                    @if (videoUrl != null)
                    {
                        <text>|</text>
                        <strong><a href="@videoUrl">Video</a></strong>
                    }
                    @item.Issue.DetailText
                </div>
            </div>
        }
    </div>
}
